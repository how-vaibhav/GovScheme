{% extends "base.html" %} {% load static %} {% block title %}Send Feedback -
GovAid{% endblock %} {% block content %}
<!-- Header -->
<section
  class="bg-gradient-to-r from-primary-600 to-primary-700 dark:from-gray-800 dark:to-gray-900 py-12"
>
  <div class="container mx-auto px-4">
    <div class="flex items-center space-x-4 mb-4">
      <a
        href="{% url 'home' %}"
        class="text-primary-100 hover:text-white transition-colors flex items-center gap-1"
      >
        <i class="fas fa-arrow-left"></i> Home
      </a>
    </div>
    <h1 class="text-4xl md:text-5xl font-bold text-white mb-3">
      <i class="fas fa-comments mr-3"></i>Send Us Your Feedback
    </h1>
    <p class="text-lg text-primary-100 dark:text-gray-300">
      Your feedback helps us improve government scheme services
    </p>
  </div>
</section>

<!-- Form Section -->
<section class="py-12 bg-gray-50 dark:bg-gray-900">
  <div class="container mx-auto px-4">
    <div class="max-w-2xl mx-auto">
      <!-- Success Message -->
      {% if messages %}
      <div
        class="bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 mb-6 flex gap-3"
      >
        <i
          class="fas fa-check-circle text-green-600 dark:text-green-400 text-xl flex-shrink-0 mt-0.5"
        ></i>
        <div>
          {% for message in messages %}
          <p class="text-sm text-green-800 dark:text-green-300">
            {{ message }}
          </p>
          {% endfor %}
        </div>
      </div>
      {% endif %}

      <div class="card p-8 md:p-10">
        <!-- Form Info -->
        <div
          class="mb-8 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg"
        >
          <p class="text-sm text-blue-800 dark:text-blue-200">
            <i class="fas fa-info-circle mr-2"></i>
            Your feedback is valuable and helps us serve you better. Please
            share your experience with our government schemes portal.
          </p>
        </div>

        <form method="post" id="feedbackForm" class="space-y-6">
          {% csrf_token %} {% for field in form %}
          <div>
            <label
              for="{{ field.id_for_label }}"
              class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
            >
              {{ field.label }} {% if field.field.required %}<span
                class="text-red-600 dark:text-red-400"
                >*</span
              >{% endif %}
            </label>

            {% if field.widget.input_type == 'textarea' %} {{ field }} {% elif
            field.widget.input_type == 'select' %} {{ field }} {% else %} {{
            field }} {% endif %} {% if field.errors %}
            <div
              class="mt-1.5 text-sm text-red-600 dark:text-red-400 space-y-1"
            >
              {% for error in field.errors %}
              <p>{{ error }}</p>
              {% endfor %}
            </div>
            {% endif %} {% if field.help_text %}
            <p class="mt-1.5 text-xs text-gray-500 dark:text-gray-400">
              {{ field.help_text|safe }}
            </p>
            {% endif %}
          </div>
          {% endfor %}

          <!-- Submit Button -->
          <div class="pt-6 border-t border-gray-200 dark:border-gray-700">
            <button
              type="submit"
              id="submitBtn"
              class="btn-primary w-full py-3 rounded-lg font-medium text-base transition-all flex items-center justify-center gap-2"
            >
              <span id="submitText"
                ><i class="fas fa-paper-plane"></i> Submit Feedback</span
              >
            </button>
          </div>
        </form>

        <!-- View Feedbacks Link -->
        <div class="mt-6 text-center">
          <a
            href="{% url 'view_feedbacks' %}"
            class="text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium transition-colors flex items-center justify-center gap-2"
          >
            <i class="fas fa-folder-open"></i> View Your Previous Feedbacks
          </a>
        </div>
      </div>

      <!-- Tips Box -->
      <div
        class="mt-8 card p-6 bg-amber-50 dark:bg-amber-900/20 border-2 border-amber-200 dark:border-amber-800"
      >
        <p class="text-sm text-amber-900 dark:text-amber-200 mb-3">
          <i class="fas fa-lightbulb mr-2 font-bold"></i>
          <strong>Tips for better feedback:</strong>
        </p>
        <ul class="text-sm text-amber-800 dark:text-amber-300 space-y-1 ml-5">
          <li>• Be specific about your experience</li>
          <li>• Include details that help us understand your concern</li>
          <li>• Share both positive and constructive feedback</li>
          <li>• We respond to all feedbacks within 24-48 hours</li>
        </ul>
      </div>
    </div>
  </div>
</section>

<script>
  // Dark mode
  const savedTheme = localStorage.getItem("theme");
  if (
    savedTheme === "dark" ||
    (!savedTheme && window.matchMedia("(prefers-color-scheme: dark)").matches)
  ) {
    document.documentElement.classList.add("dark");
  }

  // Apply input styling
  document
    .querySelectorAll('input:not([type="checkbox"]), textarea, select')
    .forEach((el) => {
      if (!el.classList.contains("input")) {
        el.className =
          "w-full px-4 py-3 rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:border-primary-500 focus:ring-4 focus:ring-primary-100 transition-all outline-none " +
          (el.tagName === "TEXTAREA" ? "resize-none" : "");
      }
    });

  // Form submission
  document
    .getElementById("feedbackForm")
    .addEventListener("submit", function (e) {
      const btn = document.getElementById("submitBtn");
      const text = document.getElementById("submitText");
      btn.disabled = true;
      text.innerHTML = '<span class="spinner"></span> Submitting...';
    });
</script>
{% endblock %}
