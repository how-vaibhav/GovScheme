{% extends "base.html" %} {% load static %} {% block title %}Advanced Search -
GovAid{% endblock %} {% block content %}
<!-- Header -->
<section
  class="bg-gradient-to-r from-primary-600 to-primary-700 dark:from-gray-800 dark:to-gray-900 py-12"
>
  <div class="container mx-auto px-4">
    <div class="max-w-4xl mx-auto text-center">
      <h1 class="text-4xl md:text-5xl font-bold text-white mb-4">
        <i class="fas fa-search-plus mr-3"></i>Advanced Search
      </h1>
      <p class="text-lg text-primary-100 dark:text-gray-300">
        Find schemes using multiple criteria and filters
      </p>
    </div>
  </div>
</section>

<!-- Search Content -->
<section class="py-12 bg-gray-50 dark:bg-gray-900">
  <div class="container mx-auto px-4">
    <div class="max-w-6xl mx-auto">
      <!-- Search Form -->
      <div class="card p-6 mb-8 animate-fade-in">
        <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-6">
          <i class="fas fa-filter mr-2"></i>Search Filters
        </h3>
        <form method="GET" class="space-y-6">
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Category -->
            <div>
              <label
                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
              >
                <i class="fas fa-tag mr-2"></i>Category
              </label>
              <select name="category" class="input">
                <option value="">All Categories</option>
                {% for key, value in categories.items %}
                <option
                  value="{{ key }}"
                  {%
                  if
                  selected_category=""
                  ="key"
                  %}selected{%
                  endif
                  %}
                >
                  {{ value }}
                </option>
                {% endfor %}
              </select>
            </div>

            <!-- Age -->
            <div>
              <label
                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
              >
                <i class="fas fa-birthday-cake mr-2"></i>Your Age
              </label>
              <input
                type="number"
                name="age"
                value="{{ selected_age }}"
                placeholder="Enter your age"
                class="input"
              />
            </div>

            <!-- Income -->
            <div>
              <label
                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
              >
                <i class="fas fa-rupee-sign mr-2"></i>Annual Income
              </label>
              <input
                type="number"
                name="max_income"
                value="{{ selected_income }}"
                placeholder="Enter annual income"
                class="input"
              />
            </div>

            <!-- Location -->
            <div>
              <label
                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
              >
                <i class="fas fa-map-marker-alt mr-2"></i>Location
              </label>
              <select name="location" class="input">
                <option value="">All Locations</option>
                <option
                  value="rural"
                  {%
                  if
                  selected_location=""
                  ="rural"
                  %}selected{%
                  endif
                  %}
                >
                  Rural
                </option>
                <option
                  value="urban"
                  {%
                  if
                  selected_location=""
                  ="urban"
                  %}selected{%
                  endif
                  %}
                >
                  Urban
                </option>
              </select>
            </div>

            <!-- Caste -->
            <div>
              <label
                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
              >
                <i class="fas fa-users mr-2"></i>Caste
              </label>
              <select name="caste" class="input">
                <option value="">All</option>
                <option
                  value="G"
                  {%
                  if
                  selected_caste=""
                  ="G"
                  %}selected{%
                  endif
                  %}
                >
                  General
                </option>
                <option
                  value="OBC"
                  {%
                  if
                  selected_caste=""
                  ="OBC"
                  %}selected{%
                  endif
                  %}
                >
                  OBC
                </option>
                <option
                  value="SC"
                  {%
                  if
                  selected_caste=""
                  ="SC"
                  %}selected{%
                  endif
                  %}
                >
                  SC
                </option>
                <option
                  value="ST"
                  {%
                  if
                  selected_caste=""
                  ="ST"
                  %}selected{%
                  endif
                  %}
                >
                  ST
                </option>
                <option
                  value="PVTG"
                  {%
                  if
                  selected_caste=""
                  ="PVTG"
                  %}selected{%
                  endif
                  %}
                >
                  PVTG
                </option>
              </select>
            </div>

            <!-- Disability -->
            <div>
              <label
                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
              >
                <i class="fas fa-wheelchair mr-2"></i>Person with Disability
              </label>
              <select name="disability" class="input">
                <option value="">Not Specified</option>
                <option
                  value="yes"
                  {%
                  if
                  request.GET.disability=""
                  ="yes"
                  %}selected{%
                  endif
                  %}
                >
                  Yes
                </option>
              </select>
            </div>

            <!-- Minority -->
            <div>
              <label
                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
              >
                <i class="fas fa-user-friends mr-2"></i>Minority Community
              </label>
              <select name="minority" class="input">
                <option value="">Not Specified</option>
                <option
                  value="yes"
                  {%
                  if
                  request.GET.minority=""
                  ="yes"
                  %}selected{%
                  endif
                  %}
                >
                  Yes
                </option>
              </select>
            </div>

            <!-- BPL -->
            <div>
              <label
                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
              >
                <i class="fas fa-hand-holding-heart mr-2"></i>Below Poverty Line
              </label>
              <select name="bpl" class="input">
                <option value="">Not Specified</option>
                <option
                  value="yes"
                  {%
                  if
                  request.GET.bpl=""
                  ="yes"
                  %}selected{%
                  endif
                  %}
                >
                  Yes
                </option>
              </select>
            </div>
          </div>

          <!-- Buttons -->
          <div
            class="flex gap-3 pt-4 border-t border-gray-200 dark:border-gray-700"
          >
            <button type="submit" class="btn-primary">
              <i class="fas fa-search mr-2"></i>Search Schemes
            </button>
            <a href="{% url 'advanced_search' %}" class="btn-outline">
              <i class="fas fa-redo mr-2"></i>Reset Filters
            </a>
          </div>
        </form>
      </div>

      <!-- Results -->
      {% if request.GET %}
      <div class="mb-6 flex items-center justify-between">
        <h3 class="text-lg font-bold text-gray-900 dark:text-white">
          <i class="fas fa-list mr-2"></i>Search Results ({{ total_results }})
        </h3>
      </div>

      {% if schemes %}
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {% for scheme in schemes %}
        <div
          class="card p-6 group hover:shadow-xl transition-all duration-300 animate-fade-in"
        >
          <!-- Category Badge -->
          <span
            class="inline-block px-3 py-1 mb-3 text-xs font-medium rounded-full bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300"
          >
            <i class="fas fa-tag mr-1"></i>{{ scheme.get_category_display }}
          </span>

          <!-- Icon -->
          <div
            class="w-14 h-14 bg-primary-100 dark:bg-primary-900 rounded-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300"
          >
            <i
              class="fas fa-landmark text-2xl text-primary-600 dark:text-primary-400"
            ></i>
          </div>

          <!-- Name -->
          <h3
            class="text-lg font-bold text-gray-900 dark:text-white mb-2 line-clamp-2"
          >
            {{ scheme.name }}
          </h3>

          <!-- Objective -->
          <p class="text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2">
            {{ scheme.objective }}
          </p>

          <!-- Agency -->
          <div class="mb-4 pb-4 border-b border-gray-200 dark:border-gray-700">
            <p class="text-xs text-gray-500 dark:text-gray-500">
              <i class="fas fa-building mr-1"></i>{{ scheme.agency }}
            </p>
          </div>

          <!-- Benefits -->
          <div class="mb-4">
            <p
              class="text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"
            >
              Benefits:
            </p>
            <p class="text-xs text-gray-600 dark:text-gray-400 line-clamp-2">
              {{ scheme.benefits|truncatewords:12 }}
            </p>
          </div>

          <!-- Actions -->
          <div class="flex gap-2">
            <a
              href="{% url 'scheme_detail' scheme.pk %}"
              class="flex-1 btn-outline py-2 text-sm rounded-lg text-center font-medium"
            >
              <i class="fas fa-info-circle mr-1"></i> Details
            </a>
            <a
              href="{% url 'user_eligibility' scheme.pk %}"
              class="flex-1 btn-primary py-2 text-sm rounded-lg text-center font-medium"
            >
              <i class="fas fa-check mr-1"></i> Check
            </a>
          </div>
        </div>
        {% endfor %}
      </div>
      {% else %}
      <div class="empty-state py-16">
        <i
          class="fas fa-search text-6xl text-gray-300 dark:text-gray-600 mb-4"
        ></i>
        <p class="text-gray-600 dark:text-gray-400 text-lg mb-2">
          No schemes found
        </p>
        <p class="text-gray-500 dark:text-gray-500 text-sm">
          Try adjusting your search criteria
        </p>
      </div>
      {% endif %} {% endif %}
    </div>
  </div>
</section>

<script>
  // Dark mode
  const savedTheme = localStorage.getItem("theme");
  if (
    savedTheme === "dark" ||
    (!savedTheme && window.matchMedia("(prefers-color-scheme: dark)").matches)
  ) {
    document.documentElement.classList.add("dark");
  }
</script>
{% endblock %}
